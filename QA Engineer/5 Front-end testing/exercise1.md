# Введение
Существует три основных подхода к разработке веб-приложений: одностраничные (SPA), многостраничные (MPA) и прогрессивные (PWA). Они выделяются среди других подходов простотой разработки, удобством для пользователей и широкими возможностями для развития бизнеса.
# MPA
## Определение
MPA (Multi Page Application) — это многостраничные приложения, которые работают по традиционной схеме. Каждая страница отправляет запрос на сервер и полностью обновляет все данные. Даже если эти данные небольшие. Таким образом тратится производительность на отображение одних и тех же элементов. Соответственно это влияет на скорость и производительность. Поэтому их использование целесообразно только в тех случаях, когда нужно отобразить большое количество контента.
Выбор MPA целесообразен, если:
- приложения используются только для чтения информации;
- есть необходимость в использовании приложения в браузерах без поддержки JavaScript.

## Преимущества
- Легкая SEO оптимизация. Архитектура MPA позволяет достаточно легко оптимизировать каждую страницу под поисковые системы.
- привычность для пользователей — за счет простого интерфейса и классической навигации.
- Данные из Google.Аналитики. Один из факторов успеха интернет-проекта – получение информации о поведении пользователей на вебсайте.
- Масштабируемость. MPA-архитектура подходит, когда вебсайт состоит из сотен и тысяч страниц.
- Навигация. Пользователь может сохранять ссылки на страницы в закладках и легко делиться ими.
- Легкая разработка. Как правило для разработки многостраничного приложения требуется меньший стек технологий.
- Множество решений. Используя MPA вы можете найти подходящее коробочное решение. Например использовать Magento, OpenCart и WordPress c его плагином WooCommerce для разработки e-commerce веб приложения или Dolphin, Elgg для разработки социальных сетей.

## Недостатки
- Для разработки мобильных приложений потребуется намного больше времени. В большинстве случаев потребуется написание back-end с нуля.
- Сложно разделить front-end и back-end. Как правило они очень тесно взаимодействуют друг с другом. Усложняется работа front-end и back-end разработчиков.
- Ниже скорость взаимодействия. MPA-серверы перезагружают контент, когда пользователь взаимодействует с приложением. Хотя существуют методы ускорения MPA (например, оптимизация работы с кэшем), но пользовательский опыт все же не будет дотягивать до SPA.
- Поддерживать и обновлять крупные многостраничные вебсайты хлопотно.

## Примеры
Модель MPA лучше использовать для информационных ресурсов, интернет-магазинов, каталогов и маркетплейсов. Если ваша компания предоставляет большое количество товаров или услуг – нужно делать MPA.
Платформа MPA по-прежнему используется для создания подавляющего большинства веб-приложений.
Примеры:
- Amazon (`amazon.com`)
- eBay (`ebay.com`)
- Forbes (`forbes.ru`)

# SPA
## Определение
SPA (Single Page Application) — это одностраничное веб-приложение, загружаемое на одной HTML-странице и не требующее перезагрузки за счёт динамического обновления с помощью AJAX или Websocket. Сервер собирает и загружает страницу в браузер пользователя один раз – при первом посещении. Далее отдается только динамический контент. Статичные блоки (например, шапка и боковая панель) не перезагружаются.
Скорости загрузки удается добиться с помощью продвинутых фреймворков JavaScript: Angular, React, Ember, Meteor, Knockout, Vue.
Небольшое одностраничное приложение можно сделать с помощью библиотеки jQuery. Однако этот вариант не самый оптимальный для больших проектов.
Выбор SPA целесообразен, если:
- есть необходимость в многофункциональном, насыщенном пользовательском интерфейсе;
- есть необходимость в интерфейсе API — использовании готовых блоков для построения приложения.

## Преимущества
- Скорость загрузки элементов. При переключении вкладок SPA загружается только часть контента. Каркас страницы загружается единожды.
- Упрощенная разработка — код можно начинать писать с файла `file://URL`, не используя сервер, не нужен отдельный код для рендера страницы на стороне сервера.
- Скорость разработки. Готовые библиотеки и фреймворки дают мощные инструменты для разработки веб приложений. Над проектом могут параллельно работать back-end и front-end разработчики. Благодаря четкому разделению они не будут мешать друг другу.
- Сниженные затраты на написание серверной части. Основную часть программы составляет фронтенд.
- Оффлайн-режим. Работа без интернет-подключения с помощью кэша.
- Кроссплатформенность. Работает на любых устройствах и операционных системах.
- Поддержка. Легче мониторить и исправлять ошибки.
- Обновление. SPA может прямо обновляться разработчиком.
- Непрерывный UX. За счет мгновенного переключения страниц работа в SPA похожа на использование нативного приложения, а не сайта.
- Возможность реализовать широкий набор функций. Фактически SPA это программа, которая работает в браузере. А если вести разработку в соответствии со стандартами прогрессивных приложений, то открываются и другие возможности. Например – добавление значка приложения на домашний экран смартфона.

## Недостатки
- Плохая SEO оптимизация:
  - ограниченное семантическое ядро;
  - меньше возможностей для таргетирования по разным ключевым запросам;
  - проблемы с индексацией динамического контента;
  - сложности с аналитикой посещаемости;
  - невозможно делиться ссылками на конкретные страницы, как в многостраничных приложениях.
- Нагрузка на браузер — из-за того, что клиентские фреймворки тяжелые, они довольно долго загружаются.
- Необходимость поддержки JavaScript — без JS нельзя полноценно пользоваться полным функционалом приложения.
- Низкий уровень безопасности – из-за межсайтового скриптинга (XSS) злоумышленники могут получить доступ к коду и добавлять скрипты на стороне клиента. Если использовать современные фреймворки, они могу сделать веб приложение безопасным. Но использование jQuery может существенно понизить безопасность проекта.
- Невозможность сохранения истории переходов по страницам. Не поддерживает навигационные кнопки браузера «вперед» и «назад».
- При разработке и поддержке SPA нужно учитывать возможные проблемы совместимости с различными браузерами.

Многие из перечисленных ограничений можно обойти через использование Deep links, History API и других современных технологий разработки.
## Примеры
Одностраничные веб приложения хорошо подходят для разработки динамических платформ, с небольшим объемом данных.
Формат SPA лучше всего подходит для проектов со сложным интерфейсом и функционалом, где поисковая оптимизация не имеет значения:
- Соцсети;
- Корпоративный софт (CRM, ERP);
- SaaS-платформы;
- Разделы в многостраничных сайтах (личный кабинет);
- Отдельные сервисы.
Примеры динамических приложений:
- Gmail (`mail.google.com/mail`)
- Google Maps (`google.com/maps`)
- Facebok (`facebook.com`)

# PWA
## Определение
PWA (Progressive Web Apps) – это прогрессивное приложение, сайт, построенный на веб-технологиях с помощью JavaScript, HTML и CSS и взаимодействующий с посетителем как приложение. Он может добавляться на главный экран мобильных устройств и отправлять push-уведомления. За счёт доступа к аппаратным средствам устройства PWA работает без подключения к интернету.
При первом посещении пользователем PWA-сайта устанавливается скрипт Service Worker, который добавляет оболочку приложения в кэш. После загрузки оболочки приложение запрашивает содержимое для заполнения представления, а затем запрашивается контент. Когда все запросы завершены, service worker переходит в режим ожидания и находится там до тех пор, пока сетевой запрос не инициирует новое событие.
Прогрессивное веб-приложение (PWA) может быть одностраничным приложением (SPA), но для PWA не обязательно быть SPA. SPA может существовать внутри PWA.
PWA отличаются от SPA в том смысле, что они всегда отображают свое содержимое способом, близким к мгновенному.

## Преимущества
- Кроссплатформенность — могут работать сразу с несколькими операционными системами.
- Высокая скорость работы.
- Высокая скорость и простота установки.
- Простота и скорость разработки — для создания PWA, не нужен отдельный сайт, достаточно изменить уже существующий.
- Минимальные требования к ресурсам устройств. Интерфейс подстраивается под ширину экрана компьютера или телефона.
- Безопасность. PWA работает только по HTTPS протоколу.
- Индексируемость в поисковых движках.
- Интерактивные функции: push-уведомления и гео-локация.
- Можно закреплять иконку на домашнем экране телефона.
- Большинство функций доступны офлайн. А если возникает необходимость дождаться ответа с сервера, PWA включает экран загрузки или отдельные элементы интерфейса, сигнализирующие о том что данные загружаются. Это направлено на улучшение пользовательского опыта.
- Ссылкой на PWA-приложение можно делиться, как на обычный вебсайт.

## Недостатки
- Не все браузеры поддерживают основные функции таких приложений (например, Firefox и Edge).
- Сложность в поиске разработчиков: PWA – относительно новая и пока ещё не слишком распространённая тенденция, и поэтому далеко не все разработчики смогут с ней справиться.
- Не поддерживается на старых смартфонах. Для iOS – ниже версии 11.3
- Потребление энергии выше, чем у простого вебсайта.
- В отличие от мобильных приложений, PWA не представлены в магазинах AppStore и Google Play.
- Поскольку PWA не требуют верификации в магазинах приложений, гарантии безопасности для пользователей несколько ниже.
- У PWA нет доступа к некоторым аппаратным ресурсам устройств. Например, к Bluetooth или NFC. Хотя подвижки в этом направлении есть и в ближайшем будущем можно ожидать расширение функционала прогрессивных веб-приложений.

## Примеры
Если нужно обеспечить функциональность близкую к полноценным программам и охватить как мобильных, так и ПК пользователей за минимальный бюджет, то нужно делать PWA.
Примеры:
- Google Docs (`docs.google.com`)
- WhatsApp (`whatsapp.com`)
- Slack (`slack.com`)

## Различия

Характеристика|MPA|SPA|PWA
---|:---:|:---:|:---:
**Cкорость работы**|обмен данными происходит медленней, чем в SPA| работает быстро после изначальной загрузки|в целом скорость ниже, потому что каждая страница загружается заново
**Cкорость разработки**|требуется больше времени|быстрота разработки|быстрота разработки
**Простота разработки**|Легкая разработка|более простые в разработке|более простые в разработке
**Front-end и back-end**|сложно разделить|четкое разделение|разделены
**Готовые решения**|множество коробочных решений|готовые библиотеки и фреймворки|базовые каркасы
**Безопасность**|масштаб работ по обеспечению безопасности больше, чем в SPA|уязвим к XSS-атакам при несоблюдении мер защиты| менее уязвимо, но защищать нужно каждую страницу
**Область применения**|приложения, использующиеся для чтения информации|приложения, в которых важен непрерывный UX|реализация сложной информационной архитектуры с уровнями и категориями
**Актуальность**|теряется|постепенно смещают со своих позиций классические MPA|постепенно смещают со своих позиций классические MPA
**Продвижение**|легкая SEO-оптимизация|плохая SEO-оптимизация|плохая SEO-оптимизация
**Возможность работы в офлайн-режиме**|нет|работа без интернет-подключения с помощью кэша|есть, с моментальной загрузкой
**Навигация**|можно сохранять ссылки на страницы|не поддерживает навигационные кнопки браузера «вперед» и «назад»|ссылкой на приложение можно делиться
**Кроссплатформенность**|нет|работает на любых устройствах и операционных системах|могут работать сразу с несколькими операционными системами


## Зачем вообще нужны PWA? Почему нельзя ограничиться SPA или MPA?  
PWA можно назвать гибридом сайта и мобильного приложения — он берет все лучшее от обоих решений.  
От сайта PWA отличается тем, что не требует наличия интернет-соединения, стабильно быстро загружает страницы, может отправлять уведомления и можно установить на устройство.  
От мобильных приложений PWA отличается легкостью в создании и использовании. Простота заключается в том, что не нужно разрабатывать отдельные версии для каждой операционной системы. Помимо этого, когда меняется сайт, PWA обновляется автоматически.  
  
  
  
## Какие технологии используются для реализации PWA?
PWA тоже можно создать почти на любой веб-технологии.  
- Service Worker  
- Web App manifest  
- HTTPS  
- Web-push  
- Оффлайн-кэш  
  
## Как отличить PWA от других типов приложений?
Для установки не требуется Google Play или Apple Store.  
Передача данных происходит по протоколу HTTPS. Данный протокол считается наиболее безопасным.  
Наличие Web Application manifest  
Возможность использования в оффлайн  
Возможно добавить на главный экран устройства


## Чем отличается между собой тестирование SPA и MPA?  Как тестировать PWA?  
  
  
**Веб-приложение** — более сложная система, нежели веб-сайт, так как она обладает более глубоким функционалом. Сегодня существует несколько типов шаблона веб-приложений (MPA, PWA, SPA).  
**Все веб-приложения проходят следующие виды тестирования (MPA, PWA, SPA):**  
- Тестирование верстки  
- Проверка адаптивност  
- Кроссбраузерное тестирование  
- Тестирование мультиязычности  
- Проверка скорости соединения  
- Проверка оптимизации загрузки  
- Тестирование ссылок  
- Тестирование функционала  
- Тестирование API  
- Тестирование баз данных  
- Регрессионное тестирование  
- Тестирование веб-безопасности  
- Тестирование производительности  
  
**Тестирование SPA не сильно отличается от тестирования любого другого сайта (к примеру MPA).** Здесь есть свои особенности из-за принципа работы.  
Как и для всех сайтов при тестировании SPA проверяются:  
- Адаптивность  
- Кроссбраузерность  
- Мультиязычность, при ее наличии  
**Загрузка при различных скоростях соединения**  
Так как SPA состоит из одной страницы и все взаимодействия происходят через запросы на обновление конкретных данных, то при ручном тестировании проверяется всё, что может обновляться.  
**Тестирование первоначальной загрузки**  
На этом этапе страница тестируется так же, как и любая другая страница. Проверяется адаптивность, загрузка всех блоков и отсутствие ошибок в загрузке  
**Тестирование функционала**  
В этой части тестируются запросы и реакция приложения на них. Например, при открытии непрочитанного письма должна обновиться центральная часть почтового приложения и количество непрочитанных писем в левой части страницы  
**Тестирование ошибочных запросов**  
В SPA большую роль играют запросы в различные поля приложения, например, форма поиска или выбор раздела приложения. Приложение должно корректно обрабатывать ошибки и сообщать об этом пользователю. Так как страница не перезагружается и полностью не обновляется, то сообщение об ошибке должно появляться в заметном месте и говорить о том, что произошло.

**Особенности тестирования PWA**
  
PWA - это набор технологий, используемых в веб-разработке, который позволяет визуально и функционально преобразовать веб-сайт в приложение. Фактически, когда пользователи посещают веб-сайт, они могут установить его на главный экран своего устройства и взаимодействовать с ним как обычное приложение, поэтому важно проверить и следующие аспекты при тестировании:  
  
- Запуск с главного экрана  
- Работа в автономном режиме  
- Получайте push-уведомления
