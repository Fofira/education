# Возможности "Your Virtual Device" в Android Studio
## Device Manager
Во вкладке **Device Manager** можно увидеть список устройств и произвести с ними некоторые действия:
1. Запустить эмулятор (**Launch this AVD in the emulator**) и остановить.
2. Открыть **Device File Explorer** - доступно после запуска
3. Отредактировать устройство (**Edit this AVD**)
4. Открыть дополнительные действия (**More actions**)

### Launch this AVD in the emulator
При нажатии на кнопку открывается эмулятор устройства.  
Во время работы эмулятора можно использовать курсор мыши, чтобы имитировать палец на сенсорном экране, и использовать панель эмулятора для выполнения обычных действий.  
**Использование курсора мыши** позволяет:
- имитировать палец на сенсорном экране
- выбирать элементы меню и поля ввода
- нажимать кнопки и элементы управления

**Использование клавиатуры** компьютера позволяет вводить информацию.  
**Жесты для навигации по эмулятору:**
- ***Swipe*** - навести курсор на экран, нажать и удерживайть основную кнопку мыши, провести по экрану, а затем отпустить.
- ***Перетаскивание элемента*** -	навести курсор на элемент на экране, нажать и удерживать кнопку мыши, переместить элемент, а затем отпустить.
- ***Нажатие*** -	навести курсор на экран, нажать кнопку мыши и отпустить.
- ***Двойное нажатие***	- навести курсор на экран, быстро дважды щелкнуть  кнопкой мыши, а затем отпустить.
- ***Нажать и удержать*** -	навести курсор на элемент на экране, нажать кнопку мыши, удерживать ее, а затем отпустить.
- ***Ввести*** -	использовать клавиатуру компьютера или клавиатуру, которая появляется на экране эмулятора.
- ***Раздвинуть*** - Нажать Control, вызвав интерфейс мультитач. Мышь действует как первый палец, а через точку привязки находится второй палец. Перетаскивание курсора переместит первую точку. Нажатие левой кнопки мыши имитирует касание обеих точек и отпускание имитирует захват обеих точек.
- ***Вертикальный Swipe***	- открыть вертикальное меню на экране и использовать колесо прокрутки (колесико мыши) для прокрутки пунктов меню. Щелкнуть элемент меню, чтобы выбрать его.

Для выполнения общих действий с эмулятором можно использовать **панель инструментов эмулятора**, если вы запускаете эмулятор в Android Studio, или панель справа, если вы запускаете эмулятор в окне вне Android Studio.  
**Доступные действия:**
- Значок питания (**Power**):
  - Нажмите, чтобы включить или выключить экран.
  - Нажмите и удерживайте, чтобы включить или выключить устройство.
- Значок увеличения громкости (**Volume up**):
	 - Нажмите, чтобы просмотреть ползунок и увеличить громкость.
   - Нажмите еще раз, чтобы увеличить громкость, или используйте ползунок, чтобы изменить громкость.
- Значок уменьшения громкости (**Volume down**):
	 - Нажмите, чтобы просмотреть ползунок и уменьшить громкость.
   - Нажмите еще раз, чтобы уменьшить громкость, или используйте ползунок, чтобы изменить громкость.
- Значок поворота влево (**Rotate left**)	- Поверните устройство на 90 градусов против часовой стрелки.
- Значок поворота вправо (**Rotate right**)	- Поверните устройство на 90 градусов по часовой стрелке.
- Значок "Назад" (**Back**)	- Вернитесь к предыдущему экрану или закройте диалоговое окно, меню параметров, панель уведомлений или экранную клавиатуру.
- Значок "Домашний экран" (**Home**) -	Вернитесь на главный экран.
- Значок обзора (**Overview**):
  - Коснитесь, чтобы открыть список миниатюр приложений, с которыми вы недавно работали.
  - Чтобы открыть приложение, коснитесь его миниатюры.
  - Чтобы удалить миниатюру из списка, проведите по ней влево или вправо.
- Снимок экрана	(**Take screenshot**) - Нажмите, чтобы сделать снимок экрана устройства.
- Запись экрана (**Record Screen** ) - Вы можете записывать видео и аудио из эмулятора Android и сохранять запись в формате WebM или анимированном GIF-файле.
- Моментальный снимок (**Snapshots**) — это сохраненный образ виртуального устройства Android (AVD), который сохраняет все состояние устройства на момент его сохранения, включая настройки ОС, состояние приложения и пользовательские данные.
- Дополнительные элементы управления (**Extended Controls**) -	Нажмите, чтобы получить доступ к другим функциям и настройкам.

#### Extended Controls
При нажатии на кнопку **Extended Controls** в меню откроется окно с настройками, разбитыми на различные категории. Рассмотрим их подробнее.
##### Location
Вкладка **Location** позволяет симулировать изменение местоположения устройства. В этом окне можно задавать широту, долготу и высоту и отслеживать изменение координат.  
Эмулятор позволяет имитировать информацию о «моем местоположении»: где находится эмулируемое устройство. Например, если вы нажмете «Мое местоположение» Значок "Мое местоположение" на Картах Google, а затем отправите местоположение, оно будет показано на карте.  
Элементы управления информацией о местоположении устройства организованы на двух вкладках: Отдельные точки (**Single points**) и Маршруты (**Routes**).
###### 1. Single points
На вкладке вы можете использовать веб-представление Карт Google для поиска мест так же, как при использовании Карт Google на телефоне или в браузере. Когда вы ищете (или щелкаете) местоположение на карте, вы можете сохранить это местоположение, выбрав Сохранить точку (**SAVE POINT**) в нижней части карты. Все сохраненные местоположения перечислены в правой части окна расширенных элементов управления (**Saved points**).  
Чтобы установить местоположение эмулятора в соответствии с местоположением, которое вы выбрали на карте, нажмите кнопку «Установить местоположение» (**Set Location**) в правом нижнем углу окна.
###### 2. Routes
Вкладка предоставляет веб-представление Google Maps, которое можно использовать для создания маршрута между двумя или более местоположениями. Чтобы создать и сохранить маршрут, выполните следующие действия:
- В представлении карты используйте текстовое поле для поиска первого пункта назначения на маршруте.
- Выберите местоположение из результатов поиска.
- Нажмите кнопку навигации (стрелка **Navigate**).
- Выберите начальную точку вашего маршрута на карте.
- Нажмите Добавить пункт назначения , чтобы добавить к маршруту дополнительные остановки.
- Сохраните свой маршрут, нажав Сохранить маршрут (**SAVE ROUTE**) в представлении карты.
- Укажите имя маршрута и нажмите Сохранить (**Save**).
Чтобы смоделировать эмулятор, следующий по сохраненному маршруту, выберите маршрут из списка сохраненных маршрутов и нажмите «Воспроизвести маршрут» (**Play route**) в правом нижнем углу окна. Чтобы остановить симуляцию, щелкните Остановить маршрут (**Stop route**).  
Для непрерывной имитации эмулятора, следующего по указанному маршруту, включите переключатель Повторить воспроизведение (**Repeat playback**). Чтобы изменить скорость следования эмулятора по указанному маршруту, выберите параметр в меню «Скорость воспроизведения» (**Playback speed**).  
Скорость по умолчанию равна значению задержки (Speed ​​1X). Вы можете увеличить скорость в два раза (Speed ​​2X), втрое (Speed ​​3X) и так далее.  
**Импорт данных GPX и KML**  
Чтобы использовать географические данные из файла формата обмена GPS (GPX) или файла языка разметки Keyhole (KML):
- Щелкните Загрузить GPX/KML.
- В диалоговом окне выберите файл на своем компьютере и нажмите «Открыть».
- Нажмите "Запустить" (**Run**).

##### Displays
Эмулятор позволяет развертывать приложение на нескольких дисплеях, которые поддерживают настраиваемые размеры, и может помочь тестировать приложения, поддерживающие многооконный и многоэкранный режимы.  
Во время работы виртуального устройства вы можете добавить до 3 дополнительных дисплеев, для этого:
1. Добавьте дисплей, нажав Добавить дополнительный дисплей (**Add secondary display**).
2. В меню Дополнительные дисплеи (**Secondary displays**) выполните одно из следующих действий:
  - Выберите одно из предустановленных соотношений сторон.
  - Выберите «Пользовательский» (**custom**) и задайте высоту (**height**), ширину (**width**) и разрешение (**dpi**) для пользовательского дисплея.
3. Щелкните Применить изменения (**Apply changes**), чтобы добавить указанные дисплеи к работающему виртуальному устройству.

##### Cellular
Вкладка **Cellular** содержит параметры, регулирующие качество связи и мобильного интернета.  
Можно задать скорость сети для разных сетевых протоколов или указать **Full**, что позволяет передавать данные так быстро, как позволяет компьютер. Указание сетевого протокола всегда медленнее, чем Full. Вы также можете указать статус сети передачи голоса и данных, например, роуминг. Значения по умолчанию установлены в AVD.  
Выберите тип сети (**Network type**):
- **GSM** (Global System for Mobile Communications) - глобальная система мобильной связи
- **HSCSD** (High-Speed Circuit-Switched Data) - высокоскоростные данные с коммутацией каналов
- **GPRS** (Generic Packet Radio Service) - пакетная радиосвязь общего пользования
- **EDGE** (Enhanced Data rates for GSM Evolution) - повышенная скорость передачи данных для GSM Evolution
- **UMTS** (Universal Mobile Telecommunications System) - универсальная система мобильной связи
- **HSDPA** (High-Speed Downlink Packet Access) - высокоскоростная пакетная передача данных от базовой станции к мобильному телефону
- **LTE** (Long-Term Evolution) - стандарт беспроводной высокоскоростной передачи данных
- **Full** (по умолчанию) - используйте сеть, предоставляемую вашим компьютером.

Выберите уровень сигнала (**Signal strength**):
- Отсутствует (**None**)
- Слабый (**Poor**)
- Умеренный (**Moderate**) - по умолчанию
- Хороший (**Good**)
- Отличный (**Great**)

Выберите **Voice status** и **Data status**:
- Домашний (**Home**) - по умолчанию
- Роуминг (**Roaming**)
- Идет поиск (**Searching**)
- Отказано (**Denied**) - только экстренные вызовы
- Незарегистрированный (**Unregistered**) - выкл.

##### Battery
На вкладке **Battery** можно установить уровень заряда батареи и её состояние (заряжается, разряжается и так далее).  
Вы можете имитировать свойства батареи устройства, чтобы увидеть, как ваше приложение работает в различных условиях.  
Чтобы выбрать уровень заряда (**Charge level**), используйте ползунок.  
Выберите подключение зарядного устройства (**Charger connection**):
- Нет (**None**)
- Зарядное устройство переменного тока (**AC charger**)

Выберите значение состояния батареи (**Battery health**):
- Хорошая (**Good**) - по умолчанию
- Плохая (**Failed**)
- Мертвая (**Dead**)
- Перенапряженная (**Overvoltage**)
- Перегретая (**Overheated**)
- Неизвестное (**Unknown**)

Выберите значение состояния батареи (**Battery status**):
- Неизвестный (**Unknown**)
- Зарядка (**Charging**)
- Разрядка (**Discharging**)
- Не заряжается (**Not charging**) - по умолчанию
- Заряженная (**Full**)

##### Phone
Вкладка **Phone** позволяет симулировать входящие звонки и смс-сообщения.
**Чтобы отправить входящий вызов:**
- Выберите или введите номер телефона в поле От (**From**)
- Щелкните Вызов устройства (**Call device**)
- При необходимости нажмите Удержать вызов (**Hold Call**), чтобы перевести вызов на удержание.
- Чтобы завершить вызов, нажмите Завершить вызов (**End Call**).
**Чтобы отправить текстовое сообщение:**
- Выберите или введите номер телефона в поле От (**From**).
- Введите сообщение в поле SMS-сообщения (**SMS message**).
- Щелкните Отправить сообщение (**Send Message**).

##### Directional pad
Вкладка **Directional pad** представляет собой дополнительный набор элементов управления, встроенных в устройство или подключенных внешне, который обеспечивает управление направлением (вверх, вниз, вправо, влево).  
Однако не все устройства поддерживают навигационную панель.
##### Microphone
**Можно включать и отключать опции:**
- "Виртуальный микрофон использует аудиовход хоста" (**Virtual microphone uses host audio input**) - эмулятор получает аудиовход от микрофона хоста, в противном случае эмулятор не получает никакого аудиовхода
- Штекер виртуальной гарнитуры вставлен (**Virtual headset plug inserted**)
- В виртуальной гарнитуре есть микрофон (**Virtual headset has microphone**)

Так же имеется кнопка "Голосовой помощник" (Voice Assist)
##### Fingerprnt
На вкладке **Fingerprnt** можно симулировать использование датчика отпечатков. На выбор предлагается 10 предустановленных отпечатков пальцев для различных тестов.  
Вы можете использовать его для тестирования интеграции отпечатков пальцев в приложении.  
Эта функция отключена для Android 5.1 (уровень API 22) и более ранних версий, а также для Wear OS.  
**Чтобы имитировать сканирование отпечатков пальцев на виртуальном устройстве:**
- Подготовьте приложение для получения отпечатка пальца.
- Выберите значение отпечатка пальца (**Fingerprint**).
- Щелкните Датчик касания (**Touch Sensor**), чтобы сообщить датчику о том, что пользователь прикладывает палец.

##### Virtual sensors
Вкладка **Virtual sensors** отвечает за симуляцию работы различных датчиков, таких как гироскоп, акселерометр и магнитометр.  
С их помощью можно тестировать приложение на предмет изменения положения устройства в пространстве, ориентации или того и другого. Эмулятор имитирует способ реагирования датчиков акселерометра и магнитометра при перемещении или повороте реального устройства.  
###### 1. Device Pose (Положение устройства)
Этот элемент управления позволяет протестировать приложение на предмет изменений положения устройства, ориентации или того и другого. Например, вы можете имитировать такие жесты, как наклон и вращение. Акселерометр (**Accelerometer**) не отслеживает абсолютное положение устройства: он просто определяет, когда происходит изменение. Элемент управления имитирует реакцию датчиков акселерометра и магнитометра при перемещении или вращении реального устройства.  
Нужно включить датчик акселерометра в AVD, чтобы использовать этот элемент управления.  
Элемент управления сообщает о событиях по осям x, y и z. Эти значения включают гравитацию. Например, если устройство подвешено в открытом космосе, оно будет испытывать нулевое ускорение (все x, y и z равны 0). Когда устройство находится на Земле и лежит экраном вверх на столе, ускорение составляет 0, 0 и 9,8 из-за гравитации.  
Система управления также сообщает о событиях, которые измеряют окружающее магнитное поле (**Magnetometer**) по осям x, y и z в микротеслах (μT).  
Чтобы повернуть устройство вокруг осей x, y и z, выберите «Повернуть» (**Rotate**) и выполните одно из действий:
- Отрегулируйте ползунки и наблюдайте за положением на верхней панели
- Переместите устройство на верхней панели и наблюдайте за ползунками и за тем, как изменяются результирующие значения акселерометра.

Чтобы переместить устройство по горизонтали (x) или по вертикали (y), выберите «Переместить» (**Move**) и выполните одно из действий:
- Отрегулируйте ползунки и наблюдайте за положением на верхней панели.
- Переместите устройство на верхней панели и наблюдайте за значениями ползунков и изменением результирующих значений акселерометра.

Чтобы расположить устройство под углом 0, 90, 180 или 270 градусов в области Поворот (**Rotation**) устройства выберите соответствующую кнопку.  
По мере настройки устройства Значения сенсоров (**Sensor values**) изменяются соответствующим образом.
###### 2. Additional sensors (Дополнительные датчики)
Эмулятор может имитировать различные датчики положения и окружающей среды.  
**Он позволяет настроить следующие датчики:**
- Температура окружающей среды (**Ambient temperature**) - датчик окружающей среды измеряет температуру окружающего воздуха.
- Магнитное поле (**Magnetic field**) - датчик положения измеряет окружающее магнитное поле. Значения указаны в микротеслах (μT).
- Близость (**Proximity**) - датчик положения измеряет расстояние до объекта; например, он может уведомить телефон о том, что лицо находится рядом с ним, чтобы позвонить. Датчик приближения должен быть включен в AVD, чтобы использовать этот элемент управления.
- Свет (**Light**) - датчик окружающей среды измеряет освещенность. Значения указаны в люксах.
- Давление (**Pressure**) - датчик окружающей среды измеряет давление окружающего воздуха. Значения указаны в миллибарах (hPa).
- Относительная влажность (**Relative Humidity**) - датчик окружающей среды измеряет относительную влажность окружающей среды.

##### Bug report
Если возникли проблемы с эмулятором, можно подготовить и отправить отчет об ошибке. Эмулятор автоматически собирает снимки экрана, журналы и другие данные для отчета об ошибке.
##### Record and Playback
Можно записывать видео прямо с вкладки «Запись и воспроизведение» (**Record and Playback**) в расширенных элементах управления. После того, как вы записали видео, вы можете сохранить его в формате WEBM или GIF.
##### Settings
Во вкладке "Дополнительно" (**Advanced**) есть два поля для редактирования:
- Средство визуализации OpenGL ES (**OpenGL ES renderer**) - выберите тип ускорения графики:
  - Автоопределение на основе хоста (**Autodetect based on host**) - Позвольте эмулятору выбрать аппаратное или программное ускорение графики в зависимости от настроек вашего компьютера. Он проверяет, соответствует ли ваш драйвер графического процессора списку известных неисправных драйверов графического процессора, и если это так, эмулятор отключает эмуляцию графического оборудования и вместо этого использует ЦП. Выбрано по умолчанию.
  - **ANGLE** (только для Windows) - Используйте ANGLE Direct3D для рендеринга графики в программном обеспечении.
  - **SwiftShader** - используйте для рендеринга графики в программном обеспечении.
  - Собственный OpenGL для настольных ПК (**Desktop native OpenGL**): используйте графический процессор на главном компьютере. Этот вариант обычно самый быстрый. Однако некоторые драйверы имеют проблемы с рендерингом графики OpenGL, поэтому это может быть ненадежным вариантом.
- Уровень API OpenGL ES (**OpenGL ES API level**) - выберите максимальную версию OpenGL ES для использования в эмуляторе:
  - Автовыбор (**Autoselect**) - пусть эмулятор выберет версию OpenGL ES на основе поддержки хоста и гостя. Выбран по умолчанию
  - Максимум рендерера (**Renderer maximum** до OpenGL ES 3.1) - Попытка использовать максимальную версию OpenGL ES.
  - Совместимость (**Compatibility (OpenGL ES 1.1/2.0)**) - используйте версию OpenGL ES, совместимую с большинством сред.

##### Help
Во вкладке с информацией о программе (**About**) можно посмотреть:
- Серийный номер эмулятора (**Emulator ADB serial number**)
- Номера версий Android и эмулятора (**Android version**, **Emulator version**)
- Последнюю доступную версию эмулятора (**Latest available emulator version**) - можно сравнить с установленной версией, чтобы определить, установлена ​​ли последняя версия программного обеспечения.

### Virtual Device Configuration
Во всплывающем окне допступны поля для редактирования:
- AVD name - название устройства
- Тип устройства
- Образ системы
- Ориентация (**Startup orientation**):
  - Portrait
  - Landscape
- Emulated Perfomance: Graphics
- Device Frame: Enable Device Frame
При нажатии на кнопку **Show Advanced Settings** появляются дополнительные поля:
- Camera:
  - Front
  - Back
- Network
  - Speed
  - Latency
- дополнительные поля в Emulated Perfomance:
  - Boot option
  - Multi-Core CPU
- Memory and Storage:
  - RAM
  - VM heap
  - Internal Storage
  - SD card
- дополнительное поле в Device Frame:
  - Custom skin defination
- Keyboard: Enable keyboard input

### More actions
В ракрывающемся списке доступны элементы:
- Cold Boot Now	- Холодный старт. Перезагрузка эмулятора
- Pair Wearable (не активна)
- Duplicate	- Дублировать созданный эмулятор
- Wipe Data	- Очистить данные устройства
- Delete	- Удалить AVD
- View Details	- Посмотреть все настройки и конфигурации устройства
- Show On Disk	- Показать папку, в которой хранятся все файлы, относящиеся к эмулятору
