# Особенности тестирования мобильных приложений
Мобильное приложение должно быть интуитивно понятным, удобным, работать бесперебойно, безопасно, круглосуточно и достаточно быстро реагировать на действия пользователя.  
Рассмотрим особенности, на которые необходимо обратить внимание при тестировании мобильных приложений:
- **Учесть все модели устройств**
  Разные версии мобильных операционных систем, разрешение экранов и другие характеристики. Важно на старте собрать статистику и понять, какие модели устройств наиболее популярны у конкретных пользователей, и тестировать на этих моделях.
- **Тестировать самую старую, самую новую ОС и браузеры**
  Если приложение не поддерживает установленную у пользователя ОС, он не сможет это приложение скачать. Разработчик, зная эту особенность, может поставить заглушку с сообщением, что ОС или браузер нужно обновить.
  - Поддержка необходимых медиа-файлов данной моделью и ОС, так как отдельные разработчики могут урезать поддержку работы с некоторыми форматами.
- **Провести тест-кейсы**
  Тестировщик учитывает все варианты взаимодействия пользователя с приложением. Для этого пишет тест-кейсы с чётким описанием действий для проверки конкретной функции. Тест-кейсы основаны на пользовательских сценариях — схемах того, как пользователь решает задачи с помощью приложения, и что ему может помешать.
- **Проверить удобство обновлений**
  Обновление не должно вызывать у пользователя сложностей. При проверке этого кейса нужно выяснить, как будет себя вести приложение, если пользователь не обновил его самостоятельно.
  Проверить различные пути установки обновлений (wifi, bluetooth, usb).
- **Проверить реакцию приложения на внешние прерывания**
  - Входящие/исходящие смс, ммс, звонки, оповещения других приложений
  - Выключение устройства, разряд/изъятие батареи
  - Подключение/отключение кабеля, карты, зарядки
  - Подключение/отключение сети, Bluetooth, авиарежима, GPS
  - Переход в режим ожидания (в том числе и с защитой паролем). Смена ориентации устройства в режиме ожидания.
  -  Потеря связи с сервером или прокси (подключение есть, но пакеты не доходят).
  - Отключение и подключение SD-карты, дополнительных устройств вроде физической клавиатуры или гарнитуры.
- **Проверить работу при слабом Wi-Fi**
  Когда человек сидит дома за компьютером, соединение стабильное. Нужно разобраться, как будет вести себя приложение в момент отсутствия сети, например если пользователь спускается в метро, и сделать так, чтобы у приложения была единая реакция на ситуацию, когда пропадает соединение.
  Такое тестирование проходит в лабораторных условиях, где возможно воссоздать максимально реалистичные условия связи. Этот вид проверки демонстрирует, как приложение будет вести себя в нестандартных ситуациях, например, когда сигнал Wi-Fi едва уловим.
- **Проверить взаимодействие с интерфейсом**
  Надо проверить функциональность, безопасность, удобство, производительность приложения и учесть все детали: от смены размера шрифта и до параллельного использования с другими программами. Можно ли свернуть текущее приложение и зайти в другое? Что ожидается от приложения при таких действиях?
  При разработке приложения нужно также учесть его пребывание в разных погодных условиях, при разном свете, поэтому нужно использовать контрастные цвета.
  Необходимо проверить, чтоб в приложении был удобный размер кнопок, чтобы не надо было искать их на экране и попадать по ним с третьего раза. Проверить скорость отклика элементов (высокая; нажатая клавиша должна визуально отличаться).
  Должны отсутствовать пустые экраны в приложении. Пользователь не должен оказываться в ситуации, в которой не очевидно, что сейчас происходит и что делать.
  Следует проверять многократное быстрое нажатие на кнопку – часто при этом может случиться падение приложения. Так же следует проверять мультитач – нажатие на несколько кнопок одновременно.
  Следует проверять наличие или отсутствие «нативных» жестов (pinch-to-zoom, doubletap) – если, например, поддерживается зум части приложения, то должен использоваться жест по умолчанию. А если нет необходимости выделять картинку, то по даблтапу она не должна выделяться.
- **Провести аттестационное тестирование**
  Оно используется для подтверждения соответствия приложения стандартам, лицензионным соглашениям и условиям использования.
  Различные версии ОС могут использовать отличные соглашения и правила (интерпретация жестов, правила навигации). Следует учитывать это при поддержке приложением нескольких версий ОС.
  Руководства (Human Interface Guidelines от Apple и Material Design для Android) помогают понимать, каким критериям должны соответствовать приложения для разных операционных систем.
  - Android:
    - Установочный файл приложения (.apk) должен быть согласован с Program Policies.
    - В случае публикации обновлённой сборки желательно придерживаться порядка управления версиями (например, принятого порядка нумерации версий).
    - Приложение не должно противоречить документу UIG .
  Так же для отдельных магазинов приложений (Amazon App Store, Samsung Apps, Yandex.Store и подобных) могут существовать свои собственные требования и гайдлайны.
  - iPhone:
    - Приложение должно иметь уникальное имя.
    - Приложение должно принадлежать к определённой категории.
    - Нужно предоставить ссылку для осуществления обратной связи с разработчиком.
    - Приложение не должно противоречить документу Human Interface Guidelines.
    - Приложению может быть отказано в сертификации по причинам наличия запрещённых материалов, непредвиденных задержек в работе или повторении существующих функций.
  - Windows Phone 7-8: приложение должно соответствовать всем категориям app certification requirements.
- **Провести случайное тестирование (fuzzy testing, “monkey” testing)**
  Мобильное устройство чаще всего находится в движении, поэтому следует ожидать, что могут возникнуть какие-то случайные действия на устройстве (если оно не заблокировано, если щекой нажимаешь кнопки). Допустим, разблокированный гаджет оказался в кармане или сумке, и приложение должно корректно справляться с набором хаотичных и бессвязных действий. Тестирование помогает выявить реакцию приложения на непредсказуемые пользовательские действия.
- **Рассмотреть разрешения**
  У нативных приложений есть возможность использовать другие функции устройства. Например, приложение, которому нужен доступ к микрофону, на iOS обязательно запрашивает разрешение. Для успешного тестирования стоит выяснить, при каких действиях приложение запрашивает разрешения, и протестировать эти действия с выданными разрешениями и без них.
- **Потестировать запросы**
  Приложение - это в первую очередь про фронтенд. Для взаимодействия с бекендом оно использует http-запросы. Запросы, как известно, могут возвращать разные коды ответа. Например, 400, 500 и другие. А также ответы могут приходить с таймаутом. Важно протестировать реакцию приложения на различные коды ответа, таймауты разной длины и измененное body ответа. Для тестирования подобных ситуаций используются снифферы - инструменты для перехвата трафика и подмены запросов и ответов. Снифферы позволяют изменять запрос и ответ целиком или частично. Самые популярные - это Charles и Fiddler.
- **Проверить работу после обновления приложения**
  У приложения на Андроид есть своя база данных, которая хранится прямо на устройстве. Добавляя новые фичи, разработчик меняет и базу: удаляет, изменяет, добавляет поля и таблицы. Чтобы протестировать это, обновим приложение до версии, в которой база изменена. После обновления нужно проверить тот функционал, который был затронут при разработке.
  - Проверить работу установленных изменений, мест, куда они вносились, убедиться в поддерживаемости обновлений более старыми операционными системами, чтобы элементы которые на новой системе работают хорошо не падали на более старых версиях.
  - Убедиться, что поддерживаются те же версии ОС, что и предыдущая версия (если новая версия приложения использует новые возможности ОС, то для старых поддерживаемых версий ОС необходимо создание урезанной версии приложения).
  - Проверка адекватного обновления (сохраняются все данные пользователя и т. п.).
- **Использовать функции девайса**
  Кроме тестируемого приложения, пользователь совершает очень много действий на девайсе. Как отреагирует приложение, если пользователь изменит часовой пояс, дату или время? А если девайс перезагрузят? А если пользователь переключится с wi-fi на мобильную сеть? Это внешний функционал операционной системы, но он напрямую влияет на работу приложения. Необходимо протестировать поведение приложение в перечисленных условиях.
- **Учесть ограниченность ресурсов и мощности**
  Мобильные устройства — это системы, которые чаще всего имеют не очень мощную начинку. Они по определению не могут работать как персональный компьютер, поскольку слабее в разы.
  Необходимо уделить внимание окнам с большим количеством информации, при длительном пребывании пользователя в приложении.
  - Утечка памяти. Особенно может проявляться на окнах, с большим количеством информации (длинные списки как пример), во время задач с длительным workflow (когда пользователь долго не выходит из приложения), при некорректно работающем кэшировании изображений.
  - Обработка ситуаций нехватки памяти для функционирования ОС, когда приложение активно или работает в фоне.
  Недостаток места для установки или работы приложения.
  - Отсутствие в некоторых устройствах поддерживаемых приложением функций (3G, SD-карта и т. п.).
  - Установка или перенос приложения на карту SD.
- **Проверить, не препятствует ли приложение совершению звонков**
  Основная задача телефона — совершать звонки, и приложение не должно препятствовать этой функции
- **Учитывать разнообразие каналов ввода**
  Мобильные приложения должны поддерживать несколько каналов ввода данных — клавиатура, голос, жесты и прочее
- **Учитывать тип мобильного приложения**
  - нативное
  - гибридное
  - PWA
- **Проверить некоторые другие моменты**
  - Поля ввода
  - Пуш-уведомления
  - Работа приложения в разных режимах: portrait/landscape, split screen
  - Геолокация
  - Поддержка платёжных систем (если присутствуют платёжные транзакции)
  - Корректное отображение различных элементов на экранах ретина/не ретина
- **Не доверять только эмуляторам**
  При тестировании мобильных приложений следует пренебречь эмуляторами, если у есть такая возможность. В них не всегда функционал соответствует всем возможностям реального девайса.
- **Проверить работу обратной связи**
  - У всех нажимаемых элементов должно быть нажатое состояние (отклик на действие) – благодаря этому пользователь всегда будет видеть, действительно ли нажатие случилось. В Android-приложениях у элементов может быть ещё одно состояние – focused.
  - Реакция кнопок на нажатие. Скорость отклика элементов должна быть достаточно высокой. Желательно использовать для проверки этого пункта самые слабые устройства среди поддерживаемых.
  - Сообщения при загрузке контента или прогресс-бар.
  - Сообщения при ошибке доступа к сети, BT, GPS.
  - Наличие понятных сообщений при попытке удалить важную информацию.
  - Наличие экрана или сообщения при окончании процесса или игры.
  - Наличие и синхронность звуков или вибрации с уведомлениями и другими событиями на экране.
- **Проверить рекламу**
  Реклама не должна перекрывать кнопки управления приложением, должна иметь доступную кнопку закрытия, потому что чаще всего пользователь ее не ищет, а просто удаляет приложение.
- **Проверить локализацию**
  - Проверка корректности перевода.
  - Проверка того, что все надписи входят в соответствующие формы, кнопки и т.п.
  - Проверка форматов дат, разделителей в числах, специфических особенностей локализации (вроде пробела перед знаком вопроса во французской, верхних индексов “o” и “a” в порядковых числительных в испанской и других нетривиальных моментов).
- **Проверить энергопотребление**
  Необходимо проверять насколько сильно приложение опустошает батарею устройства. Скорее всего пользователь удалит его, если из-за него телефон придется под заряжать слишком часто.

Относительная **лёгкость** данного тестирования в том, что обычно в мобильных приложениях нет громоздкого функционала и нужды в объёмных тестах. А главная **сложность** – в ширине функционала. С каждым обновлением увеличивается аппаратная и программная опциональность, используются дополнительные приспособления: сим-карты, наушники, стилусы, bluetooth-устройства и прочее.  
Полноценное мобильное тестирование по времени может занять от нескольких часов до нескольких недель. Всё зависит от масштабности самого приложения и конкретных задач на текущий момент.

## Инструменты для тестирования мобильных приложений
Инструментарий QA-инженера достаточно богат.
### 1. Эмуляторы устройств
Это программы, которые имитируют поведение других устройств.
Сегодня можно найти эмуляторы для всех наиболее распространенных ОС.
У iOS — это симулятор **Apple iOS**, для Android — **Android Virtual Device**.
Например, **Android SDK** позволяет запускать отладку и тестирование исходного кода. К тому же, результат можно получать в режиме реального времени.
Конечно, есть и альтернативные варианты эмуляторов, например, **MobiOne Developer** или **Electric Mobile Studio 2012**, но такие решения платные.
Эмулятор работает как реальное устройство и дублирует все аспекты структуры исходного устройства, как программного, так и аппаратного обеспечения. Он в основном имитирует все оборудование, которое использует реальное устройство, позволяя запускать на нем одно и то же приложение без изменений и все программное обеспечение. Основное преимущество эмуляторов заключается в том, что они имеют открытый исходный код и, следовательно, экономичны. Так же они помогают протестировать сложные сценарии, которые не рекомендуется проводить на настоящих мобильных телефонах (если тесты могут вывести устройство из строя).
Есть некоторые недостатки, например, они очень медленные. Кроме того, эмулятор мобильного устройства не принимает во внимание такие факторы, как перегрев/разряд батареи или конфликты с другими (по умолчанию) приложениями.
### 2. Симуляторы
Симулятор устанавливает безопасную среду, аналогичную исходной операционной системе реального устройства, но не пытается имитировать аппаратное обеспечение реального устройства. Можно увидеть ОС и интерфейс устройства, которое используется, но не испытать всех проблем, которые может вызвать оборудование. Некоторые приложения могут работать немного иначе, и это основная причина, по которой симуляторы не очень надежны.
### 3. DevTools
Тестировать мобильное веб-приложение можно в обычном браузере на компьютере с помощью инструмента DevTools. Он помогает проверить адаптивность вёрстки, смену ориентации экрана, разные скорости интернет-соединения.
### 4. Сервисы для бета-тестирования
Активная работа по выявлению ошибок, влияющих на корректную работу приложения, производится на этапе бета-тестирования — использования практически готовой версии перед окончательным запуском. Для бета-тестирования мобильных приложений используют сервисы **TestFlight** для iOS и **Beta** для Android.
**The Beta Family** – бесплатный сервис, позволяющий завести аккаунт и загрузить бета-версию приложения. После этого можно отправить приглашение протестировать ПО и затем проанализировать полученные результаты.
### 5. Снифферы
Для тестирования взаимодействия с бэкендом — частью приложения, работающей на сервере, — применяют снифферы. Сниффер — это анализатор трафика, то есть всей информации, которая проходит через компьютерные сети. С его помощью можно проверять http-запросы, различные коды ответов и реакцию приложения на них. Самые популярные снифферы — Fiddler и Charles.
### 6. Реальные устройства
Симуляторы и автоматизированные тесты, которые прогнозируют производительность оборудования, но выполнение тестов на этих симуляторах не так надежно, как тесты, проводимые на физическом устройстве. Симулятор также не может учитывать некоторые аппаратные функции, такие как определенные настройки микросхемы, вычислительная мощность и память устройства. Для полного тестирования аппаратного и программного обеспечения требуются реальные устройства.
### 7. Тестирование устройства на облачной платформе
Для разработчиков и тестировщиков мобильных приложений доставка высококачественных приложений для всех различных комбинаций устройств и ОС является серьезным усилием - это требует много времени, сложно и дорого. И поскольку новые устройства продолжают выходить на рынок, разработчики ищут более простой способ их создания и тестирования.
Облачное тестирование устройств позволяет разработчикам загружать свои приложения и тестировать их на наиболее часто используемых мобильных устройствах в постоянно расширяющемся парке, который включает новейшее сочетание устройства и ОС.
### 8. Сбор статистики
Статистическая информация о том, как пользователи работают с приложением, будет не лишней. Можно узнать, какие функции привлекают пользователей больше всего, какие ошибки они совершают.
Также будет видна статистика о том, какие версии ОС чаще всего встречаются у пользователей приложения, представленность приложения на географической карте. Получить такие данные можно, используя решения по сбору информации. Примерами наиболее распространенных бесплатных систем являются **Google Analytics**, **Flurry**, **BugSence**, **Apsalar**.

Для эффективного тестирования программных продуктов многие компании комплектуют собственный парк мобильных устройств. Это большая коллекция самых разнообразных гаджетов от умных часов до планшетов и электронных книг на базе различных ОС. Чем больше парк устройств, тем больше дефектов ПО можно выявить и сделать мобильное приложение более качественным и надёжным.
# Типы мобильных приложений. Различия в тестировании
Существует четыре основных типа в зависимости от технологий, на которых создано мобильное ПО:
- Нативные создаются для конкретной операционной системы.
- Веб-приложения — это адаптивные версии сайтов, которые могут работать на любом устройстве или ОС, поскольку доставляются с помощью мобильного браузера.
- Гибридные сочетают признаки нативных и веб-приложений.
- Кроссплатформенные продукты способны работать сразу на нескольких платформах.

## 1. Нативные приложения
Разрабатываются для определённой платформы и устройства и по максимуму используют его возможности.  
Нативный это «родной» в переводе с английского. Такие продукты создаются для конкретной операционной системы, за это отвечает IOS разработка и Android разработка. Приложения, разработанные специально для техники Apple, не будут работать на устройствах с андроидом, и наоборот.  
Эти мобильные приложения доступны для загрузки в соответствующих магазинах приложений (магазин Google Play, App Store, Microsoft Store и т. д.).  
**Используемая технология**  
Написаны с помощью различных языков программирования. Некоторые примеры включают: Java (Android), Kotlin, Python, Swift, Objective-C (iOS), C++ и React.  
**Плюсы:**
- быстрее и надежнее с точки зрения производительности;
- более эффективно используют ресурсы устройства;
- используют собственный интерфейс устройства, предоставляя самый приятный пользовательский опыт;
- имеют доступ к широкому набору функций устройства, таких как Bluetooth, контакты, камера, NFC, навигатор и др.

**Минусы:**
- сложные в разработке
- для каждой из платформ придется делать отдельный проект;
- высокая стоимость;
- занимают место в памяти устройства;
- необходимость регулярно выпускать обновления.

**Тестирование** нативных приложений включает в себя проверку работоспособности приложения на различных устройствах и операционных системах, а также проверку совместимости с различными версиями операционной системы и различными разрешениями экрана.
## 2. Веб-приложения
Это не приложения, а интерфейсы сайтов, адаптированные под мобильные устройства для удобства пользователей, доступные через мобильные браузеры.  
Веб-приложения отличаются кросс-платформенностью, простотой в разработке и невысокой производительностью: загрузка файлов и обработка действий пользователя занимают больше времени, чем в нативном приложении.  
Они существенно отличаются от обычных мобильных приложений, хотя и могут их напоминать.  
Отличие сайта от веб приложения в том, что система взаимодействует с пользователями. Через ПО можно совершать денежные переводы, проводить оплату, размещать собственный контент — все это невозможно сделать через обычный веб-сайт.  
Довольно часто встречаются. Пример — социальные сети и почтовые сервисы. Можно открывать их как обычную вкладку или устанавливать на смартфон.  
Это не отдельные приложения в том смысле, что их нужно загружать и устанавливать на устройство. На самом деле это системы, которые адаптируют свой пользовательский интерфейс к устройству, на котором находится пользователь. Фактически, когда вы сталкиваетесь с возможностью «установить» веб-приложение, оно часто просто добавляет URL-адрес веб-сайта в закладки на вашем устройстве.  
Одним из видов веб-приложений является прогрессивное веб-приложение (**PWA**), которое представляет собой родное приложение, работающее внутри браузера.  
**Используемая технология**  
Разрабатываются на базе HTML5, CSS, JavaScript, Ruby и аналогичных языков программирования, используемых для работы в интернете.  
**Плюсы:**
- сниженные затраты на разработку;
- достаточно простая и оперативная разработка;
- пользователям не нужно загружать обновления;
- не занимают место в памяти устройства;
- позволяет отображать сайты на различных устройствах;
- достаточно просты в использовании.

**Минусы:**
- полностью зависят от браузера, используемого на устройстве. Некоторые функции будут доступны в одном браузере и недоступны в другом, что, возможно, даст пользователям разные возможности;
- не смогут работать в автономном режиме;
- ограниченная безопасность;
- невысокая производительность.

**Тестирование** веб-приложений включает в себя проверку совместимости приложения с различными браузерами и устройствами.
## 3. Гибридный тип
Комбинация нативного приложения и веба. Разрабатывается сразу для двух платформ и пишется на универсальном языке программирования.  
У них может быть иконка на главном экране, отзывчивый дизайн, высокая производительность, даже возможность работать в автономном режиме.  
**Используемая технология**  
В гибридных приложениях применяется сочетание веб-технологий и собственных API. Они разработаны с использованием: Ionic, Objective C, Swift, HTML5 и других.  
**Плюсы:**
- разработка намного быстрее и экономичнее нативного подхода;
- отлично подходит для MVP (минимально жизнеспособный продукт);
- быстро загружаются, идеально подходят для использования в странах более медленным подключением к интернету;
- используют единую кодовую базу, требуется поддерживать гораздо меньше кода;
- автономное обновление;
- не нужно постоянно выпускать новую версию, достаточно добавить изменения на сервер.

**Минусы:**
- низкая мощность и скорость по сравнению с нативными;
- ограниченный функционал;
- слабый визуальный стиль.

**Тестирование** гибридных приложений включает в себя проверку совместимости приложения с различными операционными системами и различными разрешениями экрана.
## 4. Кроссплатформенные приложения
Кроссплатформенное мобильное приложение способно работать сразу на нескольких платформах — iOS и Android. Такое программное обеспечение может подходить для планшетов, телевизоров и других гаджетов. Кроссплатформенную разработку используют для создания MVP, в последнее время эта технология предпочтительнее гибридных продуктов.  
Приложения на **react native** (популярный кроссплатформенный фреймворк) все чаще пользуются популярностью не только для проверки гипотез. Например, Skype, Pinterest и ряд известных социальных сетей разработаны именно на нем.  
**Используемая технология**  
Разрабатываются с помощью Xamarin, Flutter, Ionic, React Native, Appcelerator, Ruby Motion и других языков и фреймворков.  
**Плюсы:**
- похожи на нативные, мало кто из пользователей замечают отличия;
- один код для IOS и Android;
- невысокая стоимость;
- быстрая разработка и релиз.

**Минусы:**
- нельзя реализовать ряд функциональностей;
- скорость работы и производительность ниже, чем у нативного подхода;
- могут быть проблемы с визуальной частью.

Тестирование кроссплатформенных приложений включает проверку совместимости. Основная цель: убедиться, что приложение может успешно перемещаться из одной среды в другую. Другими словами, это позволяет определить, готов ли продукт к работе на разных платформах с различными конфигурациями оборудования и/или программного обеспечения.
